//
// DO NOT EDIT.
// swift-format-ignore-file
//
// Generated by the protocol buffer compiler.
// Source: monad.proto
//
import GRPC
import NIO
import NIOConcurrencyHelpers
import SwiftProtobuf


/// Usage: instantiate `MonadChatServiceClient`, then call methods of this protocol to make API calls.
internal protocol MonadChatServiceClientProtocol: GRPCClient {
  var serviceName: String { get }
  var interceptors: MonadChatServiceClientInterceptorFactoryProtocol? { get }

  func chatStream(
    _ request: MonadChatRequest,
    callOptions: CallOptions?,
    handler: @escaping (MonadChatResponse) -> Void
  ) -> ServerStreamingCall<MonadChatRequest, MonadChatResponse>

  func sendMessage(
    _ request: MonadChatRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadChatRequest, MonadMessage>

  func generateTitle(
    _ request: MonadGenerateTitleRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadGenerateTitleRequest, MonadGenerateTitleResponse>
}

extension MonadChatServiceClientProtocol {
  internal var serviceName: String {
    return "monad.ChatService"
  }

  /// Main streaming chat interaction
  ///
  /// - Parameters:
  ///   - request: Request to send to ChatStream.
  ///   - callOptions: Call options.
  ///   - handler: A closure called when each response is received from the server.
  /// - Returns: A `ServerStreamingCall` with futures for the metadata and status.
  internal func chatStream(
    _ request: MonadChatRequest,
    callOptions: CallOptions? = nil,
    handler: @escaping (MonadChatResponse) -> Void
  ) -> ServerStreamingCall<MonadChatRequest, MonadChatResponse> {
    return self.makeServerStreamingCall(
      path: MonadChatServiceClientMetadata.Methods.chatStream.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeChatStreamInterceptors() ?? [],
      handler: handler
    )
  }

  /// Single message interaction (utility/fast models)
  ///
  /// - Parameters:
  ///   - request: Request to send to SendMessage.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func sendMessage(
    _ request: MonadChatRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadChatRequest, MonadMessage> {
    return self.makeUnaryCall(
      path: MonadChatServiceClientMetadata.Methods.sendMessage.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSendMessageInterceptors() ?? []
    )
  }

  /// Title generation
  ///
  /// - Parameters:
  ///   - request: Request to send to GenerateTitle.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func generateTitle(
    _ request: MonadGenerateTitleRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadGenerateTitleRequest, MonadGenerateTitleResponse> {
    return self.makeUnaryCall(
      path: MonadChatServiceClientMetadata.Methods.generateTitle.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeGenerateTitleInterceptors() ?? []
    )
  }
}

@available(*, deprecated)
extension MonadChatServiceClient: @unchecked Sendable {}

@available(*, deprecated, renamed: "MonadChatServiceNIOClient")
internal final class MonadChatServiceClient: MonadChatServiceClientProtocol {
  private let lock = Lock()
  private var _defaultCallOptions: CallOptions
  private var _interceptors: MonadChatServiceClientInterceptorFactoryProtocol?
  internal let channel: GRPCChannel
  internal var defaultCallOptions: CallOptions {
    get { self.lock.withLock { return self._defaultCallOptions } }
    set { self.lock.withLockVoid { self._defaultCallOptions = newValue } }
  }
  internal var interceptors: MonadChatServiceClientInterceptorFactoryProtocol? {
    get { self.lock.withLock { return self._interceptors } }
    set { self.lock.withLockVoid { self._interceptors = newValue } }
  }

  /// Creates a client for the monad.ChatService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadChatServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self._defaultCallOptions = defaultCallOptions
    self._interceptors = interceptors
  }
}

internal struct MonadChatServiceNIOClient: MonadChatServiceClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadChatServiceClientInterceptorFactoryProtocol?

  /// Creates a client for the monad.ChatService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadChatServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadChatServiceAsyncClientProtocol: GRPCClient {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadChatServiceClientInterceptorFactoryProtocol? { get }

  func makeChatStreamCall(
    _ request: MonadChatRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncServerStreamingCall<MonadChatRequest, MonadChatResponse>

  func makeSendMessageCall(
    _ request: MonadChatRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadChatRequest, MonadMessage>

  func makeGenerateTitleCall(
    _ request: MonadGenerateTitleRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadGenerateTitleRequest, MonadGenerateTitleResponse>
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadChatServiceAsyncClientProtocol {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadChatServiceClientMetadata.serviceDescriptor
  }

  internal var interceptors: MonadChatServiceClientInterceptorFactoryProtocol? {
    return nil
  }

  internal func makeChatStreamCall(
    _ request: MonadChatRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncServerStreamingCall<MonadChatRequest, MonadChatResponse> {
    return self.makeAsyncServerStreamingCall(
      path: MonadChatServiceClientMetadata.Methods.chatStream.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeChatStreamInterceptors() ?? []
    )
  }

  internal func makeSendMessageCall(
    _ request: MonadChatRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadChatRequest, MonadMessage> {
    return self.makeAsyncUnaryCall(
      path: MonadChatServiceClientMetadata.Methods.sendMessage.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSendMessageInterceptors() ?? []
    )
  }

  internal func makeGenerateTitleCall(
    _ request: MonadGenerateTitleRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadGenerateTitleRequest, MonadGenerateTitleResponse> {
    return self.makeAsyncUnaryCall(
      path: MonadChatServiceClientMetadata.Methods.generateTitle.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeGenerateTitleInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadChatServiceAsyncClientProtocol {
  internal func chatStream(
    _ request: MonadChatRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncResponseStream<MonadChatResponse> {
    return self.performAsyncServerStreamingCall(
      path: MonadChatServiceClientMetadata.Methods.chatStream.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeChatStreamInterceptors() ?? []
    )
  }

  internal func sendMessage(
    _ request: MonadChatRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadMessage {
    return try await self.performAsyncUnaryCall(
      path: MonadChatServiceClientMetadata.Methods.sendMessage.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSendMessageInterceptors() ?? []
    )
  }

  internal func generateTitle(
    _ request: MonadGenerateTitleRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadGenerateTitleResponse {
    return try await self.performAsyncUnaryCall(
      path: MonadChatServiceClientMetadata.Methods.generateTitle.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeGenerateTitleInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal struct MonadChatServiceAsyncClient: MonadChatServiceAsyncClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadChatServiceClientInterceptorFactoryProtocol?

  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadChatServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

internal protocol MonadChatServiceClientInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when invoking 'chatStream'.
  func makeChatStreamInterceptors() -> [ClientInterceptor<MonadChatRequest, MonadChatResponse>]

  /// - Returns: Interceptors to use when invoking 'sendMessage'.
  func makeSendMessageInterceptors() -> [ClientInterceptor<MonadChatRequest, MonadMessage>]

  /// - Returns: Interceptors to use when invoking 'generateTitle'.
  func makeGenerateTitleInterceptors() -> [ClientInterceptor<MonadGenerateTitleRequest, MonadGenerateTitleResponse>]
}

internal enum MonadChatServiceClientMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "ChatService",
    fullName: "monad.ChatService",
    methods: [
      MonadChatServiceClientMetadata.Methods.chatStream,
      MonadChatServiceClientMetadata.Methods.sendMessage,
      MonadChatServiceClientMetadata.Methods.generateTitle,
    ]
  )

  internal enum Methods {
    internal static let chatStream = GRPCMethodDescriptor(
      name: "ChatStream",
      path: "/monad.ChatService/ChatStream",
      type: GRPCCallType.serverStreaming
    )

    internal static let sendMessage = GRPCMethodDescriptor(
      name: "SendMessage",
      path: "/monad.ChatService/SendMessage",
      type: GRPCCallType.unary
    )

    internal static let generateTitle = GRPCMethodDescriptor(
      name: "GenerateTitle",
      path: "/monad.ChatService/GenerateTitle",
      type: GRPCCallType.unary
    )
  }
}

/// Usage: instantiate `MonadSessionServiceClient`, then call methods of this protocol to make API calls.
internal protocol MonadSessionServiceClientProtocol: GRPCClient {
  var serviceName: String { get }
  var interceptors: MonadSessionServiceClientInterceptorFactoryProtocol? { get }

  func fetchAllSessions(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadEmpty, MonadSessionList>

  func fetchSession(
    _ request: MonadFetchSessionRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadFetchSessionRequest, MonadSession>

  func createSession(
    _ request: MonadSession,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadSession, MonadSession>

  func updateSession(
    _ request: MonadSession,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadSession, MonadSession>

  func deleteSession(
    _ request: MonadDeleteSessionRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadDeleteSessionRequest, MonadEmpty>

  func archiveSession(
    _ request: MonadArchiveSessionRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadArchiveSessionRequest, MonadEmpty>
}

extension MonadSessionServiceClientProtocol {
  internal var serviceName: String {
    return "monad.SessionService"
  }

  /// Unary call to FetchAllSessions
  ///
  /// - Parameters:
  ///   - request: Request to send to FetchAllSessions.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func fetchAllSessions(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadEmpty, MonadSessionList> {
    return self.makeUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.fetchAllSessions.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllSessionsInterceptors() ?? []
    )
  }

  /// Unary call to FetchSession
  ///
  /// - Parameters:
  ///   - request: Request to send to FetchSession.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func fetchSession(
    _ request: MonadFetchSessionRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadFetchSessionRequest, MonadSession> {
    return self.makeUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.fetchSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchSessionInterceptors() ?? []
    )
  }

  /// Unary call to CreateSession
  ///
  /// - Parameters:
  ///   - request: Request to send to CreateSession.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func createSession(
    _ request: MonadSession,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadSession, MonadSession> {
    return self.makeUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.createSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeCreateSessionInterceptors() ?? []
    )
  }

  /// Unary call to UpdateSession
  ///
  /// - Parameters:
  ///   - request: Request to send to UpdateSession.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func updateSession(
    _ request: MonadSession,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadSession, MonadSession> {
    return self.makeUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.updateSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeUpdateSessionInterceptors() ?? []
    )
  }

  /// Unary call to DeleteSession
  ///
  /// - Parameters:
  ///   - request: Request to send to DeleteSession.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func deleteSession(
    _ request: MonadDeleteSessionRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadDeleteSessionRequest, MonadEmpty> {
    return self.makeUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.deleteSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteSessionInterceptors() ?? []
    )
  }

  /// Unary call to ArchiveSession
  ///
  /// - Parameters:
  ///   - request: Request to send to ArchiveSession.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func archiveSession(
    _ request: MonadArchiveSessionRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadArchiveSessionRequest, MonadEmpty> {
    return self.makeUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.archiveSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeArchiveSessionInterceptors() ?? []
    )
  }
}

@available(*, deprecated)
extension MonadSessionServiceClient: @unchecked Sendable {}

@available(*, deprecated, renamed: "MonadSessionServiceNIOClient")
internal final class MonadSessionServiceClient: MonadSessionServiceClientProtocol {
  private let lock = Lock()
  private var _defaultCallOptions: CallOptions
  private var _interceptors: MonadSessionServiceClientInterceptorFactoryProtocol?
  internal let channel: GRPCChannel
  internal var defaultCallOptions: CallOptions {
    get { self.lock.withLock { return self._defaultCallOptions } }
    set { self.lock.withLockVoid { self._defaultCallOptions = newValue } }
  }
  internal var interceptors: MonadSessionServiceClientInterceptorFactoryProtocol? {
    get { self.lock.withLock { return self._interceptors } }
    set { self.lock.withLockVoid { self._interceptors = newValue } }
  }

  /// Creates a client for the monad.SessionService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadSessionServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self._defaultCallOptions = defaultCallOptions
    self._interceptors = interceptors
  }
}

internal struct MonadSessionServiceNIOClient: MonadSessionServiceClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadSessionServiceClientInterceptorFactoryProtocol?

  /// Creates a client for the monad.SessionService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadSessionServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadSessionServiceAsyncClientProtocol: GRPCClient {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadSessionServiceClientInterceptorFactoryProtocol? { get }

  func makeFetchAllSessionsCall(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadSessionList>

  func makeFetchSessionCall(
    _ request: MonadFetchSessionRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadFetchSessionRequest, MonadSession>

  func makeCreateSessionCall(
    _ request: MonadSession,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadSession, MonadSession>

  func makeUpdateSessionCall(
    _ request: MonadSession,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadSession, MonadSession>

  func makeDeleteSessionCall(
    _ request: MonadDeleteSessionRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadDeleteSessionRequest, MonadEmpty>

  func makeArchiveSessionCall(
    _ request: MonadArchiveSessionRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadArchiveSessionRequest, MonadEmpty>
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadSessionServiceAsyncClientProtocol {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadSessionServiceClientMetadata.serviceDescriptor
  }

  internal var interceptors: MonadSessionServiceClientInterceptorFactoryProtocol? {
    return nil
  }

  internal func makeFetchAllSessionsCall(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadSessionList> {
    return self.makeAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.fetchAllSessions.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllSessionsInterceptors() ?? []
    )
  }

  internal func makeFetchSessionCall(
    _ request: MonadFetchSessionRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadFetchSessionRequest, MonadSession> {
    return self.makeAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.fetchSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchSessionInterceptors() ?? []
    )
  }

  internal func makeCreateSessionCall(
    _ request: MonadSession,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadSession, MonadSession> {
    return self.makeAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.createSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeCreateSessionInterceptors() ?? []
    )
  }

  internal func makeUpdateSessionCall(
    _ request: MonadSession,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadSession, MonadSession> {
    return self.makeAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.updateSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeUpdateSessionInterceptors() ?? []
    )
  }

  internal func makeDeleteSessionCall(
    _ request: MonadDeleteSessionRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadDeleteSessionRequest, MonadEmpty> {
    return self.makeAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.deleteSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteSessionInterceptors() ?? []
    )
  }

  internal func makeArchiveSessionCall(
    _ request: MonadArchiveSessionRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadArchiveSessionRequest, MonadEmpty> {
    return self.makeAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.archiveSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeArchiveSessionInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadSessionServiceAsyncClientProtocol {
  internal func fetchAllSessions(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) async throws -> MonadSessionList {
    return try await self.performAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.fetchAllSessions.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllSessionsInterceptors() ?? []
    )
  }

  internal func fetchSession(
    _ request: MonadFetchSessionRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadSession {
    return try await self.performAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.fetchSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchSessionInterceptors() ?? []
    )
  }

  internal func createSession(
    _ request: MonadSession,
    callOptions: CallOptions? = nil
  ) async throws -> MonadSession {
    return try await self.performAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.createSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeCreateSessionInterceptors() ?? []
    )
  }

  internal func updateSession(
    _ request: MonadSession,
    callOptions: CallOptions? = nil
  ) async throws -> MonadSession {
    return try await self.performAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.updateSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeUpdateSessionInterceptors() ?? []
    )
  }

  internal func deleteSession(
    _ request: MonadDeleteSessionRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadEmpty {
    return try await self.performAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.deleteSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteSessionInterceptors() ?? []
    )
  }

  internal func archiveSession(
    _ request: MonadArchiveSessionRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadEmpty {
    return try await self.performAsyncUnaryCall(
      path: MonadSessionServiceClientMetadata.Methods.archiveSession.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeArchiveSessionInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal struct MonadSessionServiceAsyncClient: MonadSessionServiceAsyncClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadSessionServiceClientInterceptorFactoryProtocol?

  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadSessionServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

internal protocol MonadSessionServiceClientInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when invoking 'fetchAllSessions'.
  func makeFetchAllSessionsInterceptors() -> [ClientInterceptor<MonadEmpty, MonadSessionList>]

  /// - Returns: Interceptors to use when invoking 'fetchSession'.
  func makeFetchSessionInterceptors() -> [ClientInterceptor<MonadFetchSessionRequest, MonadSession>]

  /// - Returns: Interceptors to use when invoking 'createSession'.
  func makeCreateSessionInterceptors() -> [ClientInterceptor<MonadSession, MonadSession>]

  /// - Returns: Interceptors to use when invoking 'updateSession'.
  func makeUpdateSessionInterceptors() -> [ClientInterceptor<MonadSession, MonadSession>]

  /// - Returns: Interceptors to use when invoking 'deleteSession'.
  func makeDeleteSessionInterceptors() -> [ClientInterceptor<MonadDeleteSessionRequest, MonadEmpty>]

  /// - Returns: Interceptors to use when invoking 'archiveSession'.
  func makeArchiveSessionInterceptors() -> [ClientInterceptor<MonadArchiveSessionRequest, MonadEmpty>]
}

internal enum MonadSessionServiceClientMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "SessionService",
    fullName: "monad.SessionService",
    methods: [
      MonadSessionServiceClientMetadata.Methods.fetchAllSessions,
      MonadSessionServiceClientMetadata.Methods.fetchSession,
      MonadSessionServiceClientMetadata.Methods.createSession,
      MonadSessionServiceClientMetadata.Methods.updateSession,
      MonadSessionServiceClientMetadata.Methods.deleteSession,
      MonadSessionServiceClientMetadata.Methods.archiveSession,
    ]
  )

  internal enum Methods {
    internal static let fetchAllSessions = GRPCMethodDescriptor(
      name: "FetchAllSessions",
      path: "/monad.SessionService/FetchAllSessions",
      type: GRPCCallType.unary
    )

    internal static let fetchSession = GRPCMethodDescriptor(
      name: "FetchSession",
      path: "/monad.SessionService/FetchSession",
      type: GRPCCallType.unary
    )

    internal static let createSession = GRPCMethodDescriptor(
      name: "CreateSession",
      path: "/monad.SessionService/CreateSession",
      type: GRPCCallType.unary
    )

    internal static let updateSession = GRPCMethodDescriptor(
      name: "UpdateSession",
      path: "/monad.SessionService/UpdateSession",
      type: GRPCCallType.unary
    )

    internal static let deleteSession = GRPCMethodDescriptor(
      name: "DeleteSession",
      path: "/monad.SessionService/DeleteSession",
      type: GRPCCallType.unary
    )

    internal static let archiveSession = GRPCMethodDescriptor(
      name: "ArchiveSession",
      path: "/monad.SessionService/ArchiveSession",
      type: GRPCCallType.unary
    )
  }
}

/// Usage: instantiate `MonadMemoryServiceClient`, then call methods of this protocol to make API calls.
internal protocol MonadMemoryServiceClientProtocol: GRPCClient {
  var serviceName: String { get }
  var interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol? { get }

  func searchMemories(
    _ request: MonadSearchRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadSearchRequest, MonadSearchResponse>

  func saveMemory(
    _ request: MonadMemory,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadMemory, MonadMemory>

  func deleteMemory(
    _ request: MonadDeleteMemoryRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadDeleteMemoryRequest, MonadEmpty>

  func fetchAllMemories(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadEmpty, MonadMemoryList>
}

extension MonadMemoryServiceClientProtocol {
  internal var serviceName: String {
    return "monad.MemoryService"
  }

  /// Unary call to SearchMemories
  ///
  /// - Parameters:
  ///   - request: Request to send to SearchMemories.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func searchMemories(
    _ request: MonadSearchRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadSearchRequest, MonadSearchResponse> {
    return self.makeUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.searchMemories.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSearchMemoriesInterceptors() ?? []
    )
  }

  /// Unary call to SaveMemory
  ///
  /// - Parameters:
  ///   - request: Request to send to SaveMemory.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func saveMemory(
    _ request: MonadMemory,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadMemory, MonadMemory> {
    return self.makeUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.saveMemory.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveMemoryInterceptors() ?? []
    )
  }

  /// Unary call to DeleteMemory
  ///
  /// - Parameters:
  ///   - request: Request to send to DeleteMemory.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func deleteMemory(
    _ request: MonadDeleteMemoryRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadDeleteMemoryRequest, MonadEmpty> {
    return self.makeUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.deleteMemory.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteMemoryInterceptors() ?? []
    )
  }

  /// Unary call to FetchAllMemories
  ///
  /// - Parameters:
  ///   - request: Request to send to FetchAllMemories.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func fetchAllMemories(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadEmpty, MonadMemoryList> {
    return self.makeUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.fetchAllMemories.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllMemoriesInterceptors() ?? []
    )
  }
}

@available(*, deprecated)
extension MonadMemoryServiceClient: @unchecked Sendable {}

@available(*, deprecated, renamed: "MonadMemoryServiceNIOClient")
internal final class MonadMemoryServiceClient: MonadMemoryServiceClientProtocol {
  private let lock = Lock()
  private var _defaultCallOptions: CallOptions
  private var _interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol?
  internal let channel: GRPCChannel
  internal var defaultCallOptions: CallOptions {
    get { self.lock.withLock { return self._defaultCallOptions } }
    set { self.lock.withLockVoid { self._defaultCallOptions = newValue } }
  }
  internal var interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol? {
    get { self.lock.withLock { return self._interceptors } }
    set { self.lock.withLockVoid { self._interceptors = newValue } }
  }

  /// Creates a client for the monad.MemoryService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self._defaultCallOptions = defaultCallOptions
    self._interceptors = interceptors
  }
}

internal struct MonadMemoryServiceNIOClient: MonadMemoryServiceClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol?

  /// Creates a client for the monad.MemoryService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadMemoryServiceAsyncClientProtocol: GRPCClient {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol? { get }

  func makeSearchMemoriesCall(
    _ request: MonadSearchRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadSearchRequest, MonadSearchResponse>

  func makeSaveMemoryCall(
    _ request: MonadMemory,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadMemory, MonadMemory>

  func makeDeleteMemoryCall(
    _ request: MonadDeleteMemoryRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadDeleteMemoryRequest, MonadEmpty>

  func makeFetchAllMemoriesCall(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadMemoryList>
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadMemoryServiceAsyncClientProtocol {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadMemoryServiceClientMetadata.serviceDescriptor
  }

  internal var interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol? {
    return nil
  }

  internal func makeSearchMemoriesCall(
    _ request: MonadSearchRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadSearchRequest, MonadSearchResponse> {
    return self.makeAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.searchMemories.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSearchMemoriesInterceptors() ?? []
    )
  }

  internal func makeSaveMemoryCall(
    _ request: MonadMemory,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadMemory, MonadMemory> {
    return self.makeAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.saveMemory.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveMemoryInterceptors() ?? []
    )
  }

  internal func makeDeleteMemoryCall(
    _ request: MonadDeleteMemoryRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadDeleteMemoryRequest, MonadEmpty> {
    return self.makeAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.deleteMemory.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteMemoryInterceptors() ?? []
    )
  }

  internal func makeFetchAllMemoriesCall(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadMemoryList> {
    return self.makeAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.fetchAllMemories.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllMemoriesInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadMemoryServiceAsyncClientProtocol {
  internal func searchMemories(
    _ request: MonadSearchRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadSearchResponse {
    return try await self.performAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.searchMemories.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSearchMemoriesInterceptors() ?? []
    )
  }

  internal func saveMemory(
    _ request: MonadMemory,
    callOptions: CallOptions? = nil
  ) async throws -> MonadMemory {
    return try await self.performAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.saveMemory.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveMemoryInterceptors() ?? []
    )
  }

  internal func deleteMemory(
    _ request: MonadDeleteMemoryRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadEmpty {
    return try await self.performAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.deleteMemory.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteMemoryInterceptors() ?? []
    )
  }

  internal func fetchAllMemories(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) async throws -> MonadMemoryList {
    return try await self.performAsyncUnaryCall(
      path: MonadMemoryServiceClientMetadata.Methods.fetchAllMemories.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllMemoriesInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal struct MonadMemoryServiceAsyncClient: MonadMemoryServiceAsyncClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol?

  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadMemoryServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

internal protocol MonadMemoryServiceClientInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when invoking 'searchMemories'.
  func makeSearchMemoriesInterceptors() -> [ClientInterceptor<MonadSearchRequest, MonadSearchResponse>]

  /// - Returns: Interceptors to use when invoking 'saveMemory'.
  func makeSaveMemoryInterceptors() -> [ClientInterceptor<MonadMemory, MonadMemory>]

  /// - Returns: Interceptors to use when invoking 'deleteMemory'.
  func makeDeleteMemoryInterceptors() -> [ClientInterceptor<MonadDeleteMemoryRequest, MonadEmpty>]

  /// - Returns: Interceptors to use when invoking 'fetchAllMemories'.
  func makeFetchAllMemoriesInterceptors() -> [ClientInterceptor<MonadEmpty, MonadMemoryList>]
}

internal enum MonadMemoryServiceClientMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "MemoryService",
    fullName: "monad.MemoryService",
    methods: [
      MonadMemoryServiceClientMetadata.Methods.searchMemories,
      MonadMemoryServiceClientMetadata.Methods.saveMemory,
      MonadMemoryServiceClientMetadata.Methods.deleteMemory,
      MonadMemoryServiceClientMetadata.Methods.fetchAllMemories,
    ]
  )

  internal enum Methods {
    internal static let searchMemories = GRPCMethodDescriptor(
      name: "SearchMemories",
      path: "/monad.MemoryService/SearchMemories",
      type: GRPCCallType.unary
    )

    internal static let saveMemory = GRPCMethodDescriptor(
      name: "SaveMemory",
      path: "/monad.MemoryService/SaveMemory",
      type: GRPCCallType.unary
    )

    internal static let deleteMemory = GRPCMethodDescriptor(
      name: "DeleteMemory",
      path: "/monad.MemoryService/DeleteMemory",
      type: GRPCCallType.unary
    )

    internal static let fetchAllMemories = GRPCMethodDescriptor(
      name: "FetchAllMemories",
      path: "/monad.MemoryService/FetchAllMemories",
      type: GRPCCallType.unary
    )
  }
}

/// Usage: instantiate `MonadNoteServiceClient`, then call methods of this protocol to make API calls.
internal protocol MonadNoteServiceClientProtocol: GRPCClient {
  var serviceName: String { get }
  var interceptors: MonadNoteServiceClientInterceptorFactoryProtocol? { get }

  func fetchAllNotes(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadEmpty, MonadNoteList>

  func saveNote(
    _ request: MonadNote,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadNote, MonadNote>

  func deleteNote(
    _ request: MonadDeleteNoteRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadDeleteNoteRequest, MonadEmpty>
}

extension MonadNoteServiceClientProtocol {
  internal var serviceName: String {
    return "monad.NoteService"
  }

  /// Unary call to FetchAllNotes
  ///
  /// - Parameters:
  ///   - request: Request to send to FetchAllNotes.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func fetchAllNotes(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadEmpty, MonadNoteList> {
    return self.makeUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.fetchAllNotes.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllNotesInterceptors() ?? []
    )
  }

  /// Unary call to SaveNote
  ///
  /// - Parameters:
  ///   - request: Request to send to SaveNote.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func saveNote(
    _ request: MonadNote,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadNote, MonadNote> {
    return self.makeUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.saveNote.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveNoteInterceptors() ?? []
    )
  }

  /// Unary call to DeleteNote
  ///
  /// - Parameters:
  ///   - request: Request to send to DeleteNote.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func deleteNote(
    _ request: MonadDeleteNoteRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadDeleteNoteRequest, MonadEmpty> {
    return self.makeUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.deleteNote.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteNoteInterceptors() ?? []
    )
  }
}

@available(*, deprecated)
extension MonadNoteServiceClient: @unchecked Sendable {}

@available(*, deprecated, renamed: "MonadNoteServiceNIOClient")
internal final class MonadNoteServiceClient: MonadNoteServiceClientProtocol {
  private let lock = Lock()
  private var _defaultCallOptions: CallOptions
  private var _interceptors: MonadNoteServiceClientInterceptorFactoryProtocol?
  internal let channel: GRPCChannel
  internal var defaultCallOptions: CallOptions {
    get { self.lock.withLock { return self._defaultCallOptions } }
    set { self.lock.withLockVoid { self._defaultCallOptions = newValue } }
  }
  internal var interceptors: MonadNoteServiceClientInterceptorFactoryProtocol? {
    get { self.lock.withLock { return self._interceptors } }
    set { self.lock.withLockVoid { self._interceptors = newValue } }
  }

  /// Creates a client for the monad.NoteService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadNoteServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self._defaultCallOptions = defaultCallOptions
    self._interceptors = interceptors
  }
}

internal struct MonadNoteServiceNIOClient: MonadNoteServiceClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadNoteServiceClientInterceptorFactoryProtocol?

  /// Creates a client for the monad.NoteService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadNoteServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadNoteServiceAsyncClientProtocol: GRPCClient {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadNoteServiceClientInterceptorFactoryProtocol? { get }

  func makeFetchAllNotesCall(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadNoteList>

  func makeSaveNoteCall(
    _ request: MonadNote,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadNote, MonadNote>

  func makeDeleteNoteCall(
    _ request: MonadDeleteNoteRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadDeleteNoteRequest, MonadEmpty>
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadNoteServiceAsyncClientProtocol {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadNoteServiceClientMetadata.serviceDescriptor
  }

  internal var interceptors: MonadNoteServiceClientInterceptorFactoryProtocol? {
    return nil
  }

  internal func makeFetchAllNotesCall(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadNoteList> {
    return self.makeAsyncUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.fetchAllNotes.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllNotesInterceptors() ?? []
    )
  }

  internal func makeSaveNoteCall(
    _ request: MonadNote,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadNote, MonadNote> {
    return self.makeAsyncUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.saveNote.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveNoteInterceptors() ?? []
    )
  }

  internal func makeDeleteNoteCall(
    _ request: MonadDeleteNoteRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadDeleteNoteRequest, MonadEmpty> {
    return self.makeAsyncUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.deleteNote.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteNoteInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadNoteServiceAsyncClientProtocol {
  internal func fetchAllNotes(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) async throws -> MonadNoteList {
    return try await self.performAsyncUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.fetchAllNotes.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllNotesInterceptors() ?? []
    )
  }

  internal func saveNote(
    _ request: MonadNote,
    callOptions: CallOptions? = nil
  ) async throws -> MonadNote {
    return try await self.performAsyncUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.saveNote.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveNoteInterceptors() ?? []
    )
  }

  internal func deleteNote(
    _ request: MonadDeleteNoteRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadEmpty {
    return try await self.performAsyncUnaryCall(
      path: MonadNoteServiceClientMetadata.Methods.deleteNote.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteNoteInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal struct MonadNoteServiceAsyncClient: MonadNoteServiceAsyncClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadNoteServiceClientInterceptorFactoryProtocol?

  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadNoteServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

internal protocol MonadNoteServiceClientInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when invoking 'fetchAllNotes'.
  func makeFetchAllNotesInterceptors() -> [ClientInterceptor<MonadEmpty, MonadNoteList>]

  /// - Returns: Interceptors to use when invoking 'saveNote'.
  func makeSaveNoteInterceptors() -> [ClientInterceptor<MonadNote, MonadNote>]

  /// - Returns: Interceptors to use when invoking 'deleteNote'.
  func makeDeleteNoteInterceptors() -> [ClientInterceptor<MonadDeleteNoteRequest, MonadEmpty>]
}

internal enum MonadNoteServiceClientMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "NoteService",
    fullName: "monad.NoteService",
    methods: [
      MonadNoteServiceClientMetadata.Methods.fetchAllNotes,
      MonadNoteServiceClientMetadata.Methods.saveNote,
      MonadNoteServiceClientMetadata.Methods.deleteNote,
    ]
  )

  internal enum Methods {
    internal static let fetchAllNotes = GRPCMethodDescriptor(
      name: "FetchAllNotes",
      path: "/monad.NoteService/FetchAllNotes",
      type: GRPCCallType.unary
    )

    internal static let saveNote = GRPCMethodDescriptor(
      name: "SaveNote",
      path: "/monad.NoteService/SaveNote",
      type: GRPCCallType.unary
    )

    internal static let deleteNote = GRPCMethodDescriptor(
      name: "DeleteNote",
      path: "/monad.NoteService/DeleteNote",
      type: GRPCCallType.unary
    )
  }
}

/// Usage: instantiate `MonadJobServiceClient`, then call methods of this protocol to make API calls.
internal protocol MonadJobServiceClientProtocol: GRPCClient {
  var serviceName: String { get }
  var interceptors: MonadJobServiceClientInterceptorFactoryProtocol? { get }

  func fetchAllJobs(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadEmpty, MonadJobList>

  func saveJob(
    _ request: MonadJob,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadJob, MonadJob>

  func deleteJob(
    _ request: MonadDeleteJobRequest,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadDeleteJobRequest, MonadEmpty>

  func dequeueNextJob(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> UnaryCall<MonadEmpty, MonadJob>
}

extension MonadJobServiceClientProtocol {
  internal var serviceName: String {
    return "monad.JobService"
  }

  /// Unary call to FetchAllJobs
  ///
  /// - Parameters:
  ///   - request: Request to send to FetchAllJobs.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func fetchAllJobs(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadEmpty, MonadJobList> {
    return self.makeUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.fetchAllJobs.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllJobsInterceptors() ?? []
    )
  }

  /// Unary call to SaveJob
  ///
  /// - Parameters:
  ///   - request: Request to send to SaveJob.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func saveJob(
    _ request: MonadJob,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadJob, MonadJob> {
    return self.makeUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.saveJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveJobInterceptors() ?? []
    )
  }

  /// Unary call to DeleteJob
  ///
  /// - Parameters:
  ///   - request: Request to send to DeleteJob.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func deleteJob(
    _ request: MonadDeleteJobRequest,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadDeleteJobRequest, MonadEmpty> {
    return self.makeUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.deleteJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteJobInterceptors() ?? []
    )
  }

  /// Unary call to DequeueNextJob
  ///
  /// - Parameters:
  ///   - request: Request to send to DequeueNextJob.
  ///   - callOptions: Call options.
  /// - Returns: A `UnaryCall` with futures for the metadata, status and response.
  internal func dequeueNextJob(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> UnaryCall<MonadEmpty, MonadJob> {
    return self.makeUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.dequeueNextJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDequeueNextJobInterceptors() ?? []
    )
  }
}

@available(*, deprecated)
extension MonadJobServiceClient: @unchecked Sendable {}

@available(*, deprecated, renamed: "MonadJobServiceNIOClient")
internal final class MonadJobServiceClient: MonadJobServiceClientProtocol {
  private let lock = Lock()
  private var _defaultCallOptions: CallOptions
  private var _interceptors: MonadJobServiceClientInterceptorFactoryProtocol?
  internal let channel: GRPCChannel
  internal var defaultCallOptions: CallOptions {
    get { self.lock.withLock { return self._defaultCallOptions } }
    set { self.lock.withLockVoid { self._defaultCallOptions = newValue } }
  }
  internal var interceptors: MonadJobServiceClientInterceptorFactoryProtocol? {
    get { self.lock.withLock { return self._interceptors } }
    set { self.lock.withLockVoid { self._interceptors = newValue } }
  }

  /// Creates a client for the monad.JobService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadJobServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self._defaultCallOptions = defaultCallOptions
    self._interceptors = interceptors
  }
}

internal struct MonadJobServiceNIOClient: MonadJobServiceClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadJobServiceClientInterceptorFactoryProtocol?

  /// Creates a client for the monad.JobService service.
  ///
  /// - Parameters:
  ///   - channel: `GRPCChannel` to the service host.
  ///   - defaultCallOptions: Options to use for each service call if the user doesn't provide them.
  ///   - interceptors: A factory providing interceptors for each RPC.
  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadJobServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadJobServiceAsyncClientProtocol: GRPCClient {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadJobServiceClientInterceptorFactoryProtocol? { get }

  func makeFetchAllJobsCall(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadJobList>

  func makeSaveJobCall(
    _ request: MonadJob,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadJob, MonadJob>

  func makeDeleteJobCall(
    _ request: MonadDeleteJobRequest,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadDeleteJobRequest, MonadEmpty>

  func makeDequeueNextJobCall(
    _ request: MonadEmpty,
    callOptions: CallOptions?
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadJob>
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadJobServiceAsyncClientProtocol {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadJobServiceClientMetadata.serviceDescriptor
  }

  internal var interceptors: MonadJobServiceClientInterceptorFactoryProtocol? {
    return nil
  }

  internal func makeFetchAllJobsCall(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadJobList> {
    return self.makeAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.fetchAllJobs.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllJobsInterceptors() ?? []
    )
  }

  internal func makeSaveJobCall(
    _ request: MonadJob,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadJob, MonadJob> {
    return self.makeAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.saveJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveJobInterceptors() ?? []
    )
  }

  internal func makeDeleteJobCall(
    _ request: MonadDeleteJobRequest,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadDeleteJobRequest, MonadEmpty> {
    return self.makeAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.deleteJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteJobInterceptors() ?? []
    )
  }

  internal func makeDequeueNextJobCall(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) -> GRPCAsyncUnaryCall<MonadEmpty, MonadJob> {
    return self.makeAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.dequeueNextJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDequeueNextJobInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadJobServiceAsyncClientProtocol {
  internal func fetchAllJobs(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) async throws -> MonadJobList {
    return try await self.performAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.fetchAllJobs.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeFetchAllJobsInterceptors() ?? []
    )
  }

  internal func saveJob(
    _ request: MonadJob,
    callOptions: CallOptions? = nil
  ) async throws -> MonadJob {
    return try await self.performAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.saveJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeSaveJobInterceptors() ?? []
    )
  }

  internal func deleteJob(
    _ request: MonadDeleteJobRequest,
    callOptions: CallOptions? = nil
  ) async throws -> MonadEmpty {
    return try await self.performAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.deleteJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDeleteJobInterceptors() ?? []
    )
  }

  internal func dequeueNextJob(
    _ request: MonadEmpty,
    callOptions: CallOptions? = nil
  ) async throws -> MonadJob {
    return try await self.performAsyncUnaryCall(
      path: MonadJobServiceClientMetadata.Methods.dequeueNextJob.path,
      request: request,
      callOptions: callOptions ?? self.defaultCallOptions,
      interceptors: self.interceptors?.makeDequeueNextJobInterceptors() ?? []
    )
  }
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal struct MonadJobServiceAsyncClient: MonadJobServiceAsyncClientProtocol {
  internal var channel: GRPCChannel
  internal var defaultCallOptions: CallOptions
  internal var interceptors: MonadJobServiceClientInterceptorFactoryProtocol?

  internal init(
    channel: GRPCChannel,
    defaultCallOptions: CallOptions = CallOptions(),
    interceptors: MonadJobServiceClientInterceptorFactoryProtocol? = nil
  ) {
    self.channel = channel
    self.defaultCallOptions = defaultCallOptions
    self.interceptors = interceptors
  }
}

internal protocol MonadJobServiceClientInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when invoking 'fetchAllJobs'.
  func makeFetchAllJobsInterceptors() -> [ClientInterceptor<MonadEmpty, MonadJobList>]

  /// - Returns: Interceptors to use when invoking 'saveJob'.
  func makeSaveJobInterceptors() -> [ClientInterceptor<MonadJob, MonadJob>]

  /// - Returns: Interceptors to use when invoking 'deleteJob'.
  func makeDeleteJobInterceptors() -> [ClientInterceptor<MonadDeleteJobRequest, MonadEmpty>]

  /// - Returns: Interceptors to use when invoking 'dequeueNextJob'.
  func makeDequeueNextJobInterceptors() -> [ClientInterceptor<MonadEmpty, MonadJob>]
}

internal enum MonadJobServiceClientMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "JobService",
    fullName: "monad.JobService",
    methods: [
      MonadJobServiceClientMetadata.Methods.fetchAllJobs,
      MonadJobServiceClientMetadata.Methods.saveJob,
      MonadJobServiceClientMetadata.Methods.deleteJob,
      MonadJobServiceClientMetadata.Methods.dequeueNextJob,
    ]
  )

  internal enum Methods {
    internal static let fetchAllJobs = GRPCMethodDescriptor(
      name: "FetchAllJobs",
      path: "/monad.JobService/FetchAllJobs",
      type: GRPCCallType.unary
    )

    internal static let saveJob = GRPCMethodDescriptor(
      name: "SaveJob",
      path: "/monad.JobService/SaveJob",
      type: GRPCCallType.unary
    )

    internal static let deleteJob = GRPCMethodDescriptor(
      name: "DeleteJob",
      path: "/monad.JobService/DeleteJob",
      type: GRPCCallType.unary
    )

    internal static let dequeueNextJob = GRPCMethodDescriptor(
      name: "DequeueNextJob",
      path: "/monad.JobService/DequeueNextJob",
      type: GRPCCallType.unary
    )
  }
}

/// To build a server, implement a class that conforms to this protocol.
internal protocol MonadChatServiceProvider: CallHandlerProvider {
  var interceptors: MonadChatServiceServerInterceptorFactoryProtocol? { get }

  /// Main streaming chat interaction
  func chatStream(request: MonadChatRequest, context: StreamingResponseCallContext<MonadChatResponse>) -> EventLoopFuture<GRPCStatus>

  /// Single message interaction (utility/fast models)
  func sendMessage(request: MonadChatRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadMessage>

  /// Title generation
  func generateTitle(request: MonadGenerateTitleRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadGenerateTitleResponse>
}

extension MonadChatServiceProvider {
  internal var serviceName: Substring {
    return MonadChatServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  /// Determines, calls and returns the appropriate request handler, depending on the request's method.
  /// Returns nil for methods not handled by this service.
  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "ChatStream":
      return ServerStreamingServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadChatRequest>(),
        responseSerializer: ProtobufSerializer<MonadChatResponse>(),
        interceptors: self.interceptors?.makeChatStreamInterceptors() ?? [],
        userFunction: self.chatStream(request:context:)
      )

    case "SendMessage":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadChatRequest>(),
        responseSerializer: ProtobufSerializer<MonadMessage>(),
        interceptors: self.interceptors?.makeSendMessageInterceptors() ?? [],
        userFunction: self.sendMessage(request:context:)
      )

    case "GenerateTitle":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadGenerateTitleRequest>(),
        responseSerializer: ProtobufSerializer<MonadGenerateTitleResponse>(),
        interceptors: self.interceptors?.makeGenerateTitleInterceptors() ?? [],
        userFunction: self.generateTitle(request:context:)
      )

    default:
      return nil
    }
  }
}

/// To implement a server, implement an object which conforms to this protocol.
@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadChatServiceAsyncProvider: CallHandlerProvider, Sendable {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadChatServiceServerInterceptorFactoryProtocol? { get }

  /// Main streaming chat interaction
  func chatStream(
    request: MonadChatRequest,
    responseStream: GRPCAsyncResponseStreamWriter<MonadChatResponse>,
    context: GRPCAsyncServerCallContext
  ) async throws

  /// Single message interaction (utility/fast models)
  func sendMessage(
    request: MonadChatRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadMessage

  /// Title generation
  func generateTitle(
    request: MonadGenerateTitleRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadGenerateTitleResponse
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadChatServiceAsyncProvider {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadChatServiceServerMetadata.serviceDescriptor
  }

  internal var serviceName: Substring {
    return MonadChatServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  internal var interceptors: MonadChatServiceServerInterceptorFactoryProtocol? {
    return nil
  }

  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "ChatStream":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadChatRequest>(),
        responseSerializer: ProtobufSerializer<MonadChatResponse>(),
        interceptors: self.interceptors?.makeChatStreamInterceptors() ?? [],
        wrapping: { try await self.chatStream(request: $0, responseStream: $1, context: $2) }
      )

    case "SendMessage":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadChatRequest>(),
        responseSerializer: ProtobufSerializer<MonadMessage>(),
        interceptors: self.interceptors?.makeSendMessageInterceptors() ?? [],
        wrapping: { try await self.sendMessage(request: $0, context: $1) }
      )

    case "GenerateTitle":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadGenerateTitleRequest>(),
        responseSerializer: ProtobufSerializer<MonadGenerateTitleResponse>(),
        interceptors: self.interceptors?.makeGenerateTitleInterceptors() ?? [],
        wrapping: { try await self.generateTitle(request: $0, context: $1) }
      )

    default:
      return nil
    }
  }
}

internal protocol MonadChatServiceServerInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when handling 'chatStream'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeChatStreamInterceptors() -> [ServerInterceptor<MonadChatRequest, MonadChatResponse>]

  /// - Returns: Interceptors to use when handling 'sendMessage'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeSendMessageInterceptors() -> [ServerInterceptor<MonadChatRequest, MonadMessage>]

  /// - Returns: Interceptors to use when handling 'generateTitle'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeGenerateTitleInterceptors() -> [ServerInterceptor<MonadGenerateTitleRequest, MonadGenerateTitleResponse>]
}

internal enum MonadChatServiceServerMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "ChatService",
    fullName: "monad.ChatService",
    methods: [
      MonadChatServiceServerMetadata.Methods.chatStream,
      MonadChatServiceServerMetadata.Methods.sendMessage,
      MonadChatServiceServerMetadata.Methods.generateTitle,
    ]
  )

  internal enum Methods {
    internal static let chatStream = GRPCMethodDescriptor(
      name: "ChatStream",
      path: "/monad.ChatService/ChatStream",
      type: GRPCCallType.serverStreaming
    )

    internal static let sendMessage = GRPCMethodDescriptor(
      name: "SendMessage",
      path: "/monad.ChatService/SendMessage",
      type: GRPCCallType.unary
    )

    internal static let generateTitle = GRPCMethodDescriptor(
      name: "GenerateTitle",
      path: "/monad.ChatService/GenerateTitle",
      type: GRPCCallType.unary
    )
  }
}
/// To build a server, implement a class that conforms to this protocol.
internal protocol MonadSessionServiceProvider: CallHandlerProvider {
  var interceptors: MonadSessionServiceServerInterceptorFactoryProtocol? { get }

  func fetchAllSessions(request: MonadEmpty, context: StatusOnlyCallContext) -> EventLoopFuture<MonadSessionList>

  func fetchSession(request: MonadFetchSessionRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadSession>

  func createSession(request: MonadSession, context: StatusOnlyCallContext) -> EventLoopFuture<MonadSession>

  func updateSession(request: MonadSession, context: StatusOnlyCallContext) -> EventLoopFuture<MonadSession>

  func deleteSession(request: MonadDeleteSessionRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadEmpty>

  func archiveSession(request: MonadArchiveSessionRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadEmpty>
}

extension MonadSessionServiceProvider {
  internal var serviceName: Substring {
    return MonadSessionServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  /// Determines, calls and returns the appropriate request handler, depending on the request's method.
  /// Returns nil for methods not handled by this service.
  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "FetchAllSessions":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadSessionList>(),
        interceptors: self.interceptors?.makeFetchAllSessionsInterceptors() ?? [],
        userFunction: self.fetchAllSessions(request:context:)
      )

    case "FetchSession":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadFetchSessionRequest>(),
        responseSerializer: ProtobufSerializer<MonadSession>(),
        interceptors: self.interceptors?.makeFetchSessionInterceptors() ?? [],
        userFunction: self.fetchSession(request:context:)
      )

    case "CreateSession":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadSession>(),
        responseSerializer: ProtobufSerializer<MonadSession>(),
        interceptors: self.interceptors?.makeCreateSessionInterceptors() ?? [],
        userFunction: self.createSession(request:context:)
      )

    case "UpdateSession":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadSession>(),
        responseSerializer: ProtobufSerializer<MonadSession>(),
        interceptors: self.interceptors?.makeUpdateSessionInterceptors() ?? [],
        userFunction: self.updateSession(request:context:)
      )

    case "DeleteSession":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteSessionRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteSessionInterceptors() ?? [],
        userFunction: self.deleteSession(request:context:)
      )

    case "ArchiveSession":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadArchiveSessionRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeArchiveSessionInterceptors() ?? [],
        userFunction: self.archiveSession(request:context:)
      )

    default:
      return nil
    }
  }
}

/// To implement a server, implement an object which conforms to this protocol.
@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadSessionServiceAsyncProvider: CallHandlerProvider, Sendable {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadSessionServiceServerInterceptorFactoryProtocol? { get }

  func fetchAllSessions(
    request: MonadEmpty,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadSessionList

  func fetchSession(
    request: MonadFetchSessionRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadSession

  func createSession(
    request: MonadSession,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadSession

  func updateSession(
    request: MonadSession,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadSession

  func deleteSession(
    request: MonadDeleteSessionRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadEmpty

  func archiveSession(
    request: MonadArchiveSessionRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadEmpty
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadSessionServiceAsyncProvider {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadSessionServiceServerMetadata.serviceDescriptor
  }

  internal var serviceName: Substring {
    return MonadSessionServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  internal var interceptors: MonadSessionServiceServerInterceptorFactoryProtocol? {
    return nil
  }

  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "FetchAllSessions":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadSessionList>(),
        interceptors: self.interceptors?.makeFetchAllSessionsInterceptors() ?? [],
        wrapping: { try await self.fetchAllSessions(request: $0, context: $1) }
      )

    case "FetchSession":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadFetchSessionRequest>(),
        responseSerializer: ProtobufSerializer<MonadSession>(),
        interceptors: self.interceptors?.makeFetchSessionInterceptors() ?? [],
        wrapping: { try await self.fetchSession(request: $0, context: $1) }
      )

    case "CreateSession":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadSession>(),
        responseSerializer: ProtobufSerializer<MonadSession>(),
        interceptors: self.interceptors?.makeCreateSessionInterceptors() ?? [],
        wrapping: { try await self.createSession(request: $0, context: $1) }
      )

    case "UpdateSession":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadSession>(),
        responseSerializer: ProtobufSerializer<MonadSession>(),
        interceptors: self.interceptors?.makeUpdateSessionInterceptors() ?? [],
        wrapping: { try await self.updateSession(request: $0, context: $1) }
      )

    case "DeleteSession":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteSessionRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteSessionInterceptors() ?? [],
        wrapping: { try await self.deleteSession(request: $0, context: $1) }
      )

    case "ArchiveSession":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadArchiveSessionRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeArchiveSessionInterceptors() ?? [],
        wrapping: { try await self.archiveSession(request: $0, context: $1) }
      )

    default:
      return nil
    }
  }
}

internal protocol MonadSessionServiceServerInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when handling 'fetchAllSessions'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeFetchAllSessionsInterceptors() -> [ServerInterceptor<MonadEmpty, MonadSessionList>]

  /// - Returns: Interceptors to use when handling 'fetchSession'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeFetchSessionInterceptors() -> [ServerInterceptor<MonadFetchSessionRequest, MonadSession>]

  /// - Returns: Interceptors to use when handling 'createSession'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeCreateSessionInterceptors() -> [ServerInterceptor<MonadSession, MonadSession>]

  /// - Returns: Interceptors to use when handling 'updateSession'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeUpdateSessionInterceptors() -> [ServerInterceptor<MonadSession, MonadSession>]

  /// - Returns: Interceptors to use when handling 'deleteSession'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeDeleteSessionInterceptors() -> [ServerInterceptor<MonadDeleteSessionRequest, MonadEmpty>]

  /// - Returns: Interceptors to use when handling 'archiveSession'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeArchiveSessionInterceptors() -> [ServerInterceptor<MonadArchiveSessionRequest, MonadEmpty>]
}

internal enum MonadSessionServiceServerMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "SessionService",
    fullName: "monad.SessionService",
    methods: [
      MonadSessionServiceServerMetadata.Methods.fetchAllSessions,
      MonadSessionServiceServerMetadata.Methods.fetchSession,
      MonadSessionServiceServerMetadata.Methods.createSession,
      MonadSessionServiceServerMetadata.Methods.updateSession,
      MonadSessionServiceServerMetadata.Methods.deleteSession,
      MonadSessionServiceServerMetadata.Methods.archiveSession,
    ]
  )

  internal enum Methods {
    internal static let fetchAllSessions = GRPCMethodDescriptor(
      name: "FetchAllSessions",
      path: "/monad.SessionService/FetchAllSessions",
      type: GRPCCallType.unary
    )

    internal static let fetchSession = GRPCMethodDescriptor(
      name: "FetchSession",
      path: "/monad.SessionService/FetchSession",
      type: GRPCCallType.unary
    )

    internal static let createSession = GRPCMethodDescriptor(
      name: "CreateSession",
      path: "/monad.SessionService/CreateSession",
      type: GRPCCallType.unary
    )

    internal static let updateSession = GRPCMethodDescriptor(
      name: "UpdateSession",
      path: "/monad.SessionService/UpdateSession",
      type: GRPCCallType.unary
    )

    internal static let deleteSession = GRPCMethodDescriptor(
      name: "DeleteSession",
      path: "/monad.SessionService/DeleteSession",
      type: GRPCCallType.unary
    )

    internal static let archiveSession = GRPCMethodDescriptor(
      name: "ArchiveSession",
      path: "/monad.SessionService/ArchiveSession",
      type: GRPCCallType.unary
    )
  }
}
/// To build a server, implement a class that conforms to this protocol.
internal protocol MonadMemoryServiceProvider: CallHandlerProvider {
  var interceptors: MonadMemoryServiceServerInterceptorFactoryProtocol? { get }

  func searchMemories(request: MonadSearchRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadSearchResponse>

  func saveMemory(request: MonadMemory, context: StatusOnlyCallContext) -> EventLoopFuture<MonadMemory>

  func deleteMemory(request: MonadDeleteMemoryRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadEmpty>

  func fetchAllMemories(request: MonadEmpty, context: StatusOnlyCallContext) -> EventLoopFuture<MonadMemoryList>
}

extension MonadMemoryServiceProvider {
  internal var serviceName: Substring {
    return MonadMemoryServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  /// Determines, calls and returns the appropriate request handler, depending on the request's method.
  /// Returns nil for methods not handled by this service.
  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "SearchMemories":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadSearchRequest>(),
        responseSerializer: ProtobufSerializer<MonadSearchResponse>(),
        interceptors: self.interceptors?.makeSearchMemoriesInterceptors() ?? [],
        userFunction: self.searchMemories(request:context:)
      )

    case "SaveMemory":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadMemory>(),
        responseSerializer: ProtobufSerializer<MonadMemory>(),
        interceptors: self.interceptors?.makeSaveMemoryInterceptors() ?? [],
        userFunction: self.saveMemory(request:context:)
      )

    case "DeleteMemory":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteMemoryRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteMemoryInterceptors() ?? [],
        userFunction: self.deleteMemory(request:context:)
      )

    case "FetchAllMemories":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadMemoryList>(),
        interceptors: self.interceptors?.makeFetchAllMemoriesInterceptors() ?? [],
        userFunction: self.fetchAllMemories(request:context:)
      )

    default:
      return nil
    }
  }
}

/// To implement a server, implement an object which conforms to this protocol.
@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadMemoryServiceAsyncProvider: CallHandlerProvider, Sendable {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadMemoryServiceServerInterceptorFactoryProtocol? { get }

  func searchMemories(
    request: MonadSearchRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadSearchResponse

  func saveMemory(
    request: MonadMemory,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadMemory

  func deleteMemory(
    request: MonadDeleteMemoryRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadEmpty

  func fetchAllMemories(
    request: MonadEmpty,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadMemoryList
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadMemoryServiceAsyncProvider {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadMemoryServiceServerMetadata.serviceDescriptor
  }

  internal var serviceName: Substring {
    return MonadMemoryServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  internal var interceptors: MonadMemoryServiceServerInterceptorFactoryProtocol? {
    return nil
  }

  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "SearchMemories":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadSearchRequest>(),
        responseSerializer: ProtobufSerializer<MonadSearchResponse>(),
        interceptors: self.interceptors?.makeSearchMemoriesInterceptors() ?? [],
        wrapping: { try await self.searchMemories(request: $0, context: $1) }
      )

    case "SaveMemory":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadMemory>(),
        responseSerializer: ProtobufSerializer<MonadMemory>(),
        interceptors: self.interceptors?.makeSaveMemoryInterceptors() ?? [],
        wrapping: { try await self.saveMemory(request: $0, context: $1) }
      )

    case "DeleteMemory":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteMemoryRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteMemoryInterceptors() ?? [],
        wrapping: { try await self.deleteMemory(request: $0, context: $1) }
      )

    case "FetchAllMemories":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadMemoryList>(),
        interceptors: self.interceptors?.makeFetchAllMemoriesInterceptors() ?? [],
        wrapping: { try await self.fetchAllMemories(request: $0, context: $1) }
      )

    default:
      return nil
    }
  }
}

internal protocol MonadMemoryServiceServerInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when handling 'searchMemories'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeSearchMemoriesInterceptors() -> [ServerInterceptor<MonadSearchRequest, MonadSearchResponse>]

  /// - Returns: Interceptors to use when handling 'saveMemory'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeSaveMemoryInterceptors() -> [ServerInterceptor<MonadMemory, MonadMemory>]

  /// - Returns: Interceptors to use when handling 'deleteMemory'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeDeleteMemoryInterceptors() -> [ServerInterceptor<MonadDeleteMemoryRequest, MonadEmpty>]

  /// - Returns: Interceptors to use when handling 'fetchAllMemories'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeFetchAllMemoriesInterceptors() -> [ServerInterceptor<MonadEmpty, MonadMemoryList>]
}

internal enum MonadMemoryServiceServerMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "MemoryService",
    fullName: "monad.MemoryService",
    methods: [
      MonadMemoryServiceServerMetadata.Methods.searchMemories,
      MonadMemoryServiceServerMetadata.Methods.saveMemory,
      MonadMemoryServiceServerMetadata.Methods.deleteMemory,
      MonadMemoryServiceServerMetadata.Methods.fetchAllMemories,
    ]
  )

  internal enum Methods {
    internal static let searchMemories = GRPCMethodDescriptor(
      name: "SearchMemories",
      path: "/monad.MemoryService/SearchMemories",
      type: GRPCCallType.unary
    )

    internal static let saveMemory = GRPCMethodDescriptor(
      name: "SaveMemory",
      path: "/monad.MemoryService/SaveMemory",
      type: GRPCCallType.unary
    )

    internal static let deleteMemory = GRPCMethodDescriptor(
      name: "DeleteMemory",
      path: "/monad.MemoryService/DeleteMemory",
      type: GRPCCallType.unary
    )

    internal static let fetchAllMemories = GRPCMethodDescriptor(
      name: "FetchAllMemories",
      path: "/monad.MemoryService/FetchAllMemories",
      type: GRPCCallType.unary
    )
  }
}
/// To build a server, implement a class that conforms to this protocol.
internal protocol MonadNoteServiceProvider: CallHandlerProvider {
  var interceptors: MonadNoteServiceServerInterceptorFactoryProtocol? { get }

  func fetchAllNotes(request: MonadEmpty, context: StatusOnlyCallContext) -> EventLoopFuture<MonadNoteList>

  func saveNote(request: MonadNote, context: StatusOnlyCallContext) -> EventLoopFuture<MonadNote>

  func deleteNote(request: MonadDeleteNoteRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadEmpty>
}

extension MonadNoteServiceProvider {
  internal var serviceName: Substring {
    return MonadNoteServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  /// Determines, calls and returns the appropriate request handler, depending on the request's method.
  /// Returns nil for methods not handled by this service.
  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "FetchAllNotes":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadNoteList>(),
        interceptors: self.interceptors?.makeFetchAllNotesInterceptors() ?? [],
        userFunction: self.fetchAllNotes(request:context:)
      )

    case "SaveNote":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadNote>(),
        responseSerializer: ProtobufSerializer<MonadNote>(),
        interceptors: self.interceptors?.makeSaveNoteInterceptors() ?? [],
        userFunction: self.saveNote(request:context:)
      )

    case "DeleteNote":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteNoteRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteNoteInterceptors() ?? [],
        userFunction: self.deleteNote(request:context:)
      )

    default:
      return nil
    }
  }
}

/// To implement a server, implement an object which conforms to this protocol.
@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadNoteServiceAsyncProvider: CallHandlerProvider, Sendable {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadNoteServiceServerInterceptorFactoryProtocol? { get }

  func fetchAllNotes(
    request: MonadEmpty,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadNoteList

  func saveNote(
    request: MonadNote,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadNote

  func deleteNote(
    request: MonadDeleteNoteRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadEmpty
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadNoteServiceAsyncProvider {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadNoteServiceServerMetadata.serviceDescriptor
  }

  internal var serviceName: Substring {
    return MonadNoteServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  internal var interceptors: MonadNoteServiceServerInterceptorFactoryProtocol? {
    return nil
  }

  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "FetchAllNotes":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadNoteList>(),
        interceptors: self.interceptors?.makeFetchAllNotesInterceptors() ?? [],
        wrapping: { try await self.fetchAllNotes(request: $0, context: $1) }
      )

    case "SaveNote":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadNote>(),
        responseSerializer: ProtobufSerializer<MonadNote>(),
        interceptors: self.interceptors?.makeSaveNoteInterceptors() ?? [],
        wrapping: { try await self.saveNote(request: $0, context: $1) }
      )

    case "DeleteNote":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteNoteRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteNoteInterceptors() ?? [],
        wrapping: { try await self.deleteNote(request: $0, context: $1) }
      )

    default:
      return nil
    }
  }
}

internal protocol MonadNoteServiceServerInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when handling 'fetchAllNotes'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeFetchAllNotesInterceptors() -> [ServerInterceptor<MonadEmpty, MonadNoteList>]

  /// - Returns: Interceptors to use when handling 'saveNote'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeSaveNoteInterceptors() -> [ServerInterceptor<MonadNote, MonadNote>]

  /// - Returns: Interceptors to use when handling 'deleteNote'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeDeleteNoteInterceptors() -> [ServerInterceptor<MonadDeleteNoteRequest, MonadEmpty>]
}

internal enum MonadNoteServiceServerMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "NoteService",
    fullName: "monad.NoteService",
    methods: [
      MonadNoteServiceServerMetadata.Methods.fetchAllNotes,
      MonadNoteServiceServerMetadata.Methods.saveNote,
      MonadNoteServiceServerMetadata.Methods.deleteNote,
    ]
  )

  internal enum Methods {
    internal static let fetchAllNotes = GRPCMethodDescriptor(
      name: "FetchAllNotes",
      path: "/monad.NoteService/FetchAllNotes",
      type: GRPCCallType.unary
    )

    internal static let saveNote = GRPCMethodDescriptor(
      name: "SaveNote",
      path: "/monad.NoteService/SaveNote",
      type: GRPCCallType.unary
    )

    internal static let deleteNote = GRPCMethodDescriptor(
      name: "DeleteNote",
      path: "/monad.NoteService/DeleteNote",
      type: GRPCCallType.unary
    )
  }
}
/// To build a server, implement a class that conforms to this protocol.
internal protocol MonadJobServiceProvider: CallHandlerProvider {
  var interceptors: MonadJobServiceServerInterceptorFactoryProtocol? { get }

  func fetchAllJobs(request: MonadEmpty, context: StatusOnlyCallContext) -> EventLoopFuture<MonadJobList>

  func saveJob(request: MonadJob, context: StatusOnlyCallContext) -> EventLoopFuture<MonadJob>

  func deleteJob(request: MonadDeleteJobRequest, context: StatusOnlyCallContext) -> EventLoopFuture<MonadEmpty>

  func dequeueNextJob(request: MonadEmpty, context: StatusOnlyCallContext) -> EventLoopFuture<MonadJob>
}

extension MonadJobServiceProvider {
  internal var serviceName: Substring {
    return MonadJobServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  /// Determines, calls and returns the appropriate request handler, depending on the request's method.
  /// Returns nil for methods not handled by this service.
  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "FetchAllJobs":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadJobList>(),
        interceptors: self.interceptors?.makeFetchAllJobsInterceptors() ?? [],
        userFunction: self.fetchAllJobs(request:context:)
      )

    case "SaveJob":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadJob>(),
        responseSerializer: ProtobufSerializer<MonadJob>(),
        interceptors: self.interceptors?.makeSaveJobInterceptors() ?? [],
        userFunction: self.saveJob(request:context:)
      )

    case "DeleteJob":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteJobRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteJobInterceptors() ?? [],
        userFunction: self.deleteJob(request:context:)
      )

    case "DequeueNextJob":
      return UnaryServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadJob>(),
        interceptors: self.interceptors?.makeDequeueNextJobInterceptors() ?? [],
        userFunction: self.dequeueNextJob(request:context:)
      )

    default:
      return nil
    }
  }
}

/// To implement a server, implement an object which conforms to this protocol.
@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
internal protocol MonadJobServiceAsyncProvider: CallHandlerProvider, Sendable {
  static var serviceDescriptor: GRPCServiceDescriptor { get }
  var interceptors: MonadJobServiceServerInterceptorFactoryProtocol? { get }

  func fetchAllJobs(
    request: MonadEmpty,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadJobList

  func saveJob(
    request: MonadJob,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadJob

  func deleteJob(
    request: MonadDeleteJobRequest,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadEmpty

  func dequeueNextJob(
    request: MonadEmpty,
    context: GRPCAsyncServerCallContext
  ) async throws -> MonadJob
}

@available(macOS 10.15, iOS 13, tvOS 13, watchOS 6, *)
extension MonadJobServiceAsyncProvider {
  internal static var serviceDescriptor: GRPCServiceDescriptor {
    return MonadJobServiceServerMetadata.serviceDescriptor
  }

  internal var serviceName: Substring {
    return MonadJobServiceServerMetadata.serviceDescriptor.fullName[...]
  }

  internal var interceptors: MonadJobServiceServerInterceptorFactoryProtocol? {
    return nil
  }

  internal func handle(
    method name: Substring,
    context: CallHandlerContext
  ) -> GRPCServerHandlerProtocol? {
    switch name {
    case "FetchAllJobs":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadJobList>(),
        interceptors: self.interceptors?.makeFetchAllJobsInterceptors() ?? [],
        wrapping: { try await self.fetchAllJobs(request: $0, context: $1) }
      )

    case "SaveJob":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadJob>(),
        responseSerializer: ProtobufSerializer<MonadJob>(),
        interceptors: self.interceptors?.makeSaveJobInterceptors() ?? [],
        wrapping: { try await self.saveJob(request: $0, context: $1) }
      )

    case "DeleteJob":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadDeleteJobRequest>(),
        responseSerializer: ProtobufSerializer<MonadEmpty>(),
        interceptors: self.interceptors?.makeDeleteJobInterceptors() ?? [],
        wrapping: { try await self.deleteJob(request: $0, context: $1) }
      )

    case "DequeueNextJob":
      return GRPCAsyncServerHandler(
        context: context,
        requestDeserializer: ProtobufDeserializer<MonadEmpty>(),
        responseSerializer: ProtobufSerializer<MonadJob>(),
        interceptors: self.interceptors?.makeDequeueNextJobInterceptors() ?? [],
        wrapping: { try await self.dequeueNextJob(request: $0, context: $1) }
      )

    default:
      return nil
    }
  }
}

internal protocol MonadJobServiceServerInterceptorFactoryProtocol: Sendable {

  /// - Returns: Interceptors to use when handling 'fetchAllJobs'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeFetchAllJobsInterceptors() -> [ServerInterceptor<MonadEmpty, MonadJobList>]

  /// - Returns: Interceptors to use when handling 'saveJob'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeSaveJobInterceptors() -> [ServerInterceptor<MonadJob, MonadJob>]

  /// - Returns: Interceptors to use when handling 'deleteJob'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeDeleteJobInterceptors() -> [ServerInterceptor<MonadDeleteJobRequest, MonadEmpty>]

  /// - Returns: Interceptors to use when handling 'dequeueNextJob'.
  ///   Defaults to calling `self.makeInterceptors()`.
  func makeDequeueNextJobInterceptors() -> [ServerInterceptor<MonadEmpty, MonadJob>]
}

internal enum MonadJobServiceServerMetadata {
  internal static let serviceDescriptor = GRPCServiceDescriptor(
    name: "JobService",
    fullName: "monad.JobService",
    methods: [
      MonadJobServiceServerMetadata.Methods.fetchAllJobs,
      MonadJobServiceServerMetadata.Methods.saveJob,
      MonadJobServiceServerMetadata.Methods.deleteJob,
      MonadJobServiceServerMetadata.Methods.dequeueNextJob,
    ]
  )

  internal enum Methods {
    internal static let fetchAllJobs = GRPCMethodDescriptor(
      name: "FetchAllJobs",
      path: "/monad.JobService/FetchAllJobs",
      type: GRPCCallType.unary
    )

    internal static let saveJob = GRPCMethodDescriptor(
      name: "SaveJob",
      path: "/monad.JobService/SaveJob",
      type: GRPCCallType.unary
    )

    internal static let deleteJob = GRPCMethodDescriptor(
      name: "DeleteJob",
      path: "/monad.JobService/DeleteJob",
      type: GRPCCallType.unary
    )

    internal static let dequeueNextJob = GRPCMethodDescriptor(
      name: "DequeueNextJob",
      path: "/monad.JobService/DequeueNextJob",
      type: GRPCCallType.unary
    )
  }
}
